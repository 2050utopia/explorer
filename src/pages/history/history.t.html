<!-- 首页 -->
<template name="dataTable">
  <h2 class="fjb-title">区块历史</h2>
  <div class="{styles.history}">
    <div class="{styles.head}">
      <fj-Row>
        <fj-Col l="4">
          <ant-Input placeholder={{placeholder}} onChange={handleInputChange} style="max-width: 600px; height: 36px"/>
        </fj-Col>
        <fj-Col l="3">
            <ant-RadioGroup 
              style="width: 100%; margin-left: 36px; line-height: 36px" 
              defaultValue="blockHeight"
              value="{radioValue}"
              onChange={handleHashChange}
            >
              <ant-Radio value="blockHeight" style="width: 30%">区块高度</ant-Radio>
              <ant-Radio value="blockHash" style="width: 30%">区块哈希</ant-Radio>
              <ant-Radio value="transactionHash" style="width: 30%">交易哈希</ant-Radio>
            </ant-RadioGroup>
        </fj-Col>
        <ant-Button icon="search" onClick={dataQuery} class="{styles.button_contract}">
          查询
        </ant-Button>
      </fj-Row>
    </div>
    <#switch {{store.showHistoryState}}>
      <#case {{1}}>
        <BlockHistory/>
      </#case>
      <#case {{2}}>
        <BlockHeight/>
      </#case>
      <#case {{3}}>
        <TransactionHash/>
      </#case>
      <#default>
        <BlockHistory/>
      </#default>
    </#switch>
    <!-- <BlockHistory/> -->
    <!-- <BlockHeight/> -->
    <!-- <TransactionHash/> -->
    <div class="{styles.hisFooter}">
      <div class="{styles.topFooter}">
      </div>
      <div class="{styles.bottomFooter}">
        <div class="{styles.footContent}">
          Copyright &copy; 2018, 京东JD.COM &nbsp; 版权所有 &nbsp; power by
          <a href="http://ledger.jd.com/" target="_blank" class="{styles.linker}" title="京东区块链">&nbsp;京东区块链平台</a>
        </div>
      </div>
    </div>
  </div>
</template>

<!-- 历史页面default -->
<template name="blockHistory">
  <div class="{styles.historyContent}">
    <div class="{styles.stateContent}">
      <div class="{styles.triangle}"></div>
      <div class="{styles.circle}"></div>
      <div class="{styles.line}"></div>
      <table>
        <tbody>
          <tr>
            <td class="{styles.conBold}">区块高度：</td>
            <td class="{styles.conBold} {styles.conCursor}">
              <span onClick={handleChangeHeight}>{store.blockHistoryData[0].height || 0}</span>
            </td>
          </tr>
          <tr>
            <td>区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[0].hash.value || ''}</span>
            </td>
          </tr>
          <tr class="{styles.noBorder}">
            <td>前置区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[0].previousHash.value || ''}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="{styles.stateContent}">
      <div class="{styles.triangle}"></div>
      <div class="{styles.circle}"></div>
      <div class="{styles.line}"></div>
      <table>
        <tbody>
          <tr>
            <td class="{styles.conBold}">区块高度：</td>
            <td class="{styles.conBold} {styles.conCursor}">
              <span onClick={handleChangeHeight}>{store.blockHistoryData[1].height || 0}</span>
            </td>
          </tr>
          <tr>
            <td>区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[1].hash.value || ''}</span>
            </td>
          </tr>
          <tr class="{styles.noBorder}">
            <td>前置区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[1].previousHash.value || ''}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="{styles.stateContent}">
      <div class="{styles.triangle}"></div>
      <div class="{styles.circle}"></div>
      <div class="{styles.lineBottom}"></div>
      <table>
        <tbody>
          <tr>
            <td class="{styles.conBold}">区块高度：</td>
            <td class="{styles.conBold} {styles.conCursor}">
              <span onClick={handleChangeHeight}>{store.blockHistoryData[2].height || 0}</span>
            </td>
          </tr>
          <tr>
            <td>区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[2].hash.value || ''}</span>
            </td>
          </tr>
          <tr class="{styles.noBorder}">
            <td>前置区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[2].previousHash.value || ''}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="{styles.bgGroup}">
    </div>

    <div class="{styles.stateContent}">
      <div class="{styles.triangle}"></div>
      <div class="{styles.circle}"></div>
      <!-- <div class="{styles.line}"></div> -->
      <table>
        <tbody>
          <tr>
            <td class="{styles.conBold}">区块高度：</td>
            <td class="{styles.conBold} {styles.conCursor}">
              <span onClick={handleChangeHeight}>{store.blockHistoryData[3].height || 0}</span>
            </td>
          </tr>
          <tr>
            <td>区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[3].hash.value || ''}</span>
            </td>
          </tr>
          <tr class="{styles.noBorder}">
            <td>前置区块哈希：</td>
            <td class="{styles.conCursor}">
              <span onClick={handleChangeHash}>{store.blockHistoryData[3].previousHash.value || ''}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</template>

<!-- 区块高度/区块哈希页面 -->
<template name="blockHeight">
  <div class="{styles.blockHeightData}">
    <!-- 标题 -->
    <div class="{styles.header}">
      <h4 class="{styles.title}">
        区块信息
        <p onClick={store.goback}>返回</p>
      </h4>
      <!-- <hr/> -->
    </div>
    <!-- 概览 -->
    <div class="{styles.content}">
      <div class="{styles.hisTitle}">概览</div>
      <div class="{styles.hisContent}">
        <table>
          <tbody>
            <tr>
              <td>区块高度:</td>
              <td>{store.blockData.height}</td>
            </tr>
            <tr>
              <td>区块哈希:</td>
              <td>{store.blockData.hash.value}</td>
            </tr>
            <tr>
              <td>区块前置哈希:</td>
              <td>{store.blockData.previousHash.value}</td>
            </tr>
            <tr>
              <td>用户哈希:</td>
              <td>{store.blockData.userAccountSetHash.value}</td>
            </tr>
            <tr>
              <td>交易集哈希:</td>
              <td>{store.blockData.transactionSetHash.value}</td>
            </tr>
            <tr>
              <td>账本哈希:</td>
              <td>{store.blockData.ledgerHash.value}</td>
            </tr>
            <tr>
              <td>合约账户:</td>
              <td>{store.blockData.contractAccountSetHash.value}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- 交易 -->
    <div class="{styles.content}">
      <div class="{styles.hisTitle}">交易</div>
      <div class="{styles.tranContent}">
        <table>
          <thead>
            <tr>
              <td>交易哈希</td>
              <td>执行状态</td>
            </tr>
          </thead>
        </table>
        <ant-Table
          columns={toJS(BlockColumns)}
          showHeader={false}
          rowKey={getRowKey}
          dataSource={dataList}
          rowClassName="{styles.rows}"
          pagination={pagination} 
        />
      </div>
    </div>
  </div>
</template>

<!-- 交易哈希 -->
<template name="transactionHash">
  <div class="{styles.transactionHash}">
    <fj-Row>
      <fj-Col l="12">
        <div class="{styles.header}">
          <h4 class="{styles.title}">
            交易信息
            <p onClick={store.goback}>返回</p>
          </h4>
        </div>
        <div class="{styles.content}">
          <!-- 交易信息主体部分 -->
          <ul class="{styles.transaction}">
            <li>
              <span class="{styles.dh}">管理信息哈希：</span>
              <span>{store.transactionData.adminAccountHash.value || ''}</span>
            </li>
            <li>
              <span class="{styles.dh}">区块高度 ：</span>
              <span>{store.transactionData.blockHeight || 0}</span>
            </li>
            <li>
              <span class="{styles.dh}">用户根哈希：</span>
              <span>{store.transactionData.userAccountSetHash.value || ''}</span>
            </li>
            <li>
              <span class="{styles.dh}">数据根哈希：</span>
              <span>{store.transactionData.dataAccountSetHash.value || ''}</span>
            </li>
            <li>
              <span class="{styles.dh}">合约根哈希：</span>
              <span>{store.transactionData.contractAccountSetHash.value || ''}</span>
            </li>
            <li>
              <span class="{styles.dh}">哈希：</span>
              <span>{store.transactionData.hash.value || ''}</span>
            </li>
            <li>
              <span class="{styles.dh}">执行状态：</span>
              <span>{store.transactionData.executionState || 'ERROR'}</span>
            </li>
          </ul>
          <!-- 终端签名列表 -->
          <div class="{styles.transactionList}">
            <p class="{styles.title}">
              终端签名列表
              <div 
                class="{styles.arrow} {showEndpoint ? (styles.arrowTop, styles.arrowBottom)}"
                onClick={handleEndpointShow}
              ></div>
            </p>
            <div class="{styles.listSignatures} {showEndpoint ? (styles.show, styles.hide)}">
              <!-- <div class="{styles.contentSignatures}">
                <div class="{styles.titleSignatures}">
                  签名2
                </div>
                <table>
                  <tbody>
                    <tr>
                      <td>签名算法 :</td>
                      <td>ED25519</td>
                    </tr>
                    <tr>
                      <td>签名数据 :</td>
                      <td>emhhbmdzYW4=</td>
                    </tr>
                    <tr>
                      <td>公钥算法 :</td>
                      <td>ED25519</td>
                    </tr>
                    <tr>
                      <td>公钥数据 :</td>
                      <td>amQxLmNvbQ==</td>
                    </tr>
                  </tbody>
                </table>
              </div> -->
              <#each {{store.transactionData.endpointSignatures}}>
                <div class="{styles.contentSignatures}">
                  <div class="{styles.titleSignatures}">
                    签名{{@index + 1}}
                  </div>
                  <table>
                  <tbody>
                    <tr>
                      <td>签名算法 :</td>
                      <td>{store.digests[@index]}</td>
                    </tr>
                    <tr>
                      <td>签名数据 :</td>
                      <td>{@item['digest']['value'] || ''}</td>
                    </tr>
                    <tr>
                      <td>公钥算法 :</td>
                      <td>{store.pubKeys[@index]}</td>
                    </tr>
                    <tr>
                      <td>公钥数据 :</td>
                      <td>{@item['pubKey']['value'] || ''}</td>
                    </tr>
                  </tbody>
                </table>
                </div>
              </#each>
            </div>
          </div>
          <!-- 节点签名列表 -->
          <div class="{styles.transactionList}">
            <p class="{styles.title}">
              节点签名列表
              <div 
                class="{styles.arrow} {showNode ? (styles.arrowTop, styles.arrowBottom)}"
                onClick={handleNodeShow}
              ></div>
            </p>
            <div class="{styles.listSignatures} {showNode ? (styles.show, styles.hide)}">
              <#each {{store.transactionData.nodeSignatures}}>
                <div class="{styles.contentSignatures}">
                  <div class="{styles.titleSignatures}">
                    签名{{@index + 1}}
                  </div>
                  <table>
                  <tbody>
                    <tr>
                      <td>签名算法 :</td>
                      <td>{store.digestsNode[@index]}</td>
                    </tr>
                    <tr>
                      <td>签名数据 :</td>
                      <td>{@item['digest']['value'] || ''}</td>
                    </tr>
                    <tr>
                      <td>公钥算法 :</td>
                      <td>{store.pubKeysNode[@index]}</td>
                    </tr>
                    <tr>
                      <td>公钥数据 :</td>
                      <td>{@item['pubKey']['value'] || ''}</td>
                    </tr>
                  </tbody>
                </table>
                </div>
              </#each>
            </div>
          </div>

          <div class="{styles.transactionList}">
            <p class="{styles.title}">
              交易内容
              <div 
                class="{styles.arrow} {showTrans ? (styles.arrowTop, styles.arrowBottom)}"
                onClick={handleTranShow}  
              ></div>
            </p>
            <div class="{styles.contentTrans} {showTrans ? (styles.show, styles.hide)}">
              <div class="{styles.option}">
                <span>交易哈希 :&nbsp;&nbsp;</span>
                {store.transactionData.transactionContent.hash.value || ''}
              </div>
              <div class="{styles.option}">
                <span>账本哈希 :&nbsp;&nbsp;</span>
                {store.transactionData.transactionContent.ledgerHash.value || ''}
              </div>
              <!-- 待确认 -->
              <div class="{styles.optionTitle}">
                数据写入
              </div>
              <div class="{styles.dataWrite}">
                <div class="{styles.writes}">
                  写集
                </div>
                <div class="{styles.address}">
                  <span class="{styles.ledgerAddress}">账户地址 :&nbsp;&nbsp;</span>
                  EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty
                </div>
                <div class="{styles.kv}">
                  <div class="{styles.key}">
                    键 :&nbsp;&nbsp;&nbsp;UPcaZ1JRCehRwvuNS8Ty
                    <div 
                      class="{styles.arrow} {showValue ? (styles.arrowTop, styles.arrowBottom)}"
                      onClick={handleValueShow}
                    ></div>
                  </div>
                  <div class="{styles.value} {showValue ? (styles.show, styles.hide)}">
                    <div><span>值 :</span>&nbsp;&nbsp;&nbsp;xUPcaZ1JRCehR</div>
                    <div><span>预期版本 :</span>&nbsp;&nbsp;&nbsp;v2</div>
                  </div>
                </div>
                <!-- <div class="{styles.kv}">
                  <div class="{styles.key}">
                    键 :&nbsp;&nbsp;&nbsp;UPcaZ1JRCehRwvuNS8Ty
                    <div class="{styles.arrow} {styles.arrowBottom}"></div>
                  </div>
                </div>
                <div class="{styles.kv}">
                  <div class="{styles.key}">
                    键 :&nbsp;&nbsp;&nbsp;UPcaZ1JRCehRwvuNS8Ty
                    <div class="{styles.arrow} {styles.arrowBottom}"></div>
                  </div>
                </div> -->
              </div>

              <div class="{styles.optionTitle}">
                合约发布
              </div>

              <div class="{styles.dataWrite}">
                <table>
                  <tbody>
                    <tr>
                      <td>签名算法 :</td>
                      <td>EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>签名数据 :</td>
                      <td>v1.0</td>
                    </tr>
                    <tr>
                      <td>公钥算法 :</td>
                      <td>UPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>公钥数据 :</td>
                      <td>xUPcaZ1JRCehR</td>
                    </tr>
                    <tr>
                      <td>合约事件操作 :</td>
                      <td>EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>args :</td>
                      <td>v1.0</td>
                    </tr>
                    <tr>
                      <td>合约地址 :</td>
                      <td>UPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>事件 :</td>
                      <td>xUPcaZ1JRCehR</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="{styles.optionTitle}">
                数据账户注册
              </div>

              <div class="{styles.dataWrite}">
                <table>
                  <tbody>
                    <tr>
                      <td>账户地址 :</td>
                      <td>EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>账户公钥算法 :</td>
                      <td>v1.0</td>
                    </tr>
                    <tr>
                      <td>账户公钥数据 :</td>
                      <td>UPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>签名算法 :</td>
                      <td>xUPcaZ1JRCehR</td>
                    </tr>
                    <tr>
                      <td>签名数据 :</td>
                      <td>EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>签名公钥算法 :</td>
                      <td>v1.0</td>
                    </tr>
                    <tr>
                      <td>签名公钥数据 :</td>
                      <td>UPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>用户信息 :</td>
                      <td>xUPcaZ1JRCehR</td>
                    </tr>
                    <tr>
                      <td>用户地址 :</td>
                      <td>EP5HU2bMWmNxUPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>用户信息 :</td>
                      <td>v1.0</td>
                    </tr>
                    <tr>
                      <td>用户公钥算法 :</td>
                      <td>UPcaZ1JRCehRwvuNS8Ty</td>
                    </tr>
                    <tr>
                      <td>用户公钥数据 :</td>
                      <td>xUPcaZ1JRCehR</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </fj-Col>
    </fj-Row>
  </div>
</template>